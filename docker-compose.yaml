version: '3'

services:
  redis:
    image: 'redis'

  static:
    build: './static/'
    volumes:
      - ./static/html:/html

  api:
    build: './api/'
    command: 'adev runserver app.py --port 8080'
    volumes:
      - './api:/app'
    env_file: './api/.env'
    depends_on:
      - redis

  proxy:
    build: './proxy/'
    ports:
      - '8765:80'
    depends_on:
      - api
